---
openapi: 3.0.1
info:
  title: Meal Planning API
  version: v1
  description: A social meal planning application API for managing users, meal plans,
    meals, and participants.
  contact:
    name: API Support
paths:
  "/auth/login":
    post:
      summary: User login
      tags:
      - Authentication
      description: Authenticates a user and returns JWT in Authorization header
      parameters: []
      responses:
        '200':
          description: login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                      email:
                        type: string
                      name:
                        type: string
                      color:
                        type: string
                  refresh_token:
                    type: string
        '401':
          description: invalid credentials
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  type: object
                  properties:
                    email:
                      type: string
                      example: user@example.com
                    password:
                      type: string
                      example: password123
                  required:
                  - email
                  - password
  "/auth/logout":
    delete:
      summary: User logout
      tags:
      - Authentication
      description: Logs out a user by revoking their JWT
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '200':
          description: logout successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        '401':
          description: unauthorized - missing or invalid token
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
  "/auth/refresh":
    post:
      summary: Refresh access token
      tags:
      - Authentication
      description: Refreshes the JWT access token using a refresh token. Returns a
        new access token and refresh token.
      parameters: []
      responses:
        '200':
          description: token refreshed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                      email:
                        type: string
                      name:
                        type: string
                      color:
                        type: string
                  refresh_token:
                    type: string
        '400':
          description: bad request - refresh token missing
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '401':
          description: unauthorized - invalid refresh token
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                refresh_token:
                  type: string
                  example: abc123def456...
              required:
              - refresh_token
  "/meal_plan_participants":
    get:
      summary: Retrieves all meal plan participants
      tags:
      - Meal Plan Participants
      description: Returns a list of all meal plan participants in the system
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '200':
          description: meal plan participants found
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    access_level:
                      type: string
                      enum:
                      - viewer
                      - admin
                    user_id:
                      type: integer
                    meal_plan_id:
                      type: integer
                    created_at:
                      type: string
                      format: datetime
                    updated_at:
                      type: string
                      format: datetime
                  required:
                  - id
                  - access_level
                  - user_id
                  - meal_plan_id
        '401':
          description: unauthorized
    post:
      summary: Creates a meal plan participant
      tags:
      - Meal Plan Participants
      description: Creates a new meal plan participant in the system
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '201':
          description: meal plan participant created
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  access_level:
                    type: string
                  user_id:
                    type: integer
                  meal_plan_id:
                    type: integer
                  created_at:
                    type: string
                    format: datetime
                  updated_at:
                    type: string
                    format: datetime
        '401':
          description: unauthorized
        '422':
          description: invalid request
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: object
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                meal_plan_participant:
                  type: object
                  properties:
                    access_level:
                      type: string
                      enum:
                      - viewer
                      - admin
                      example: viewer
                    user_id:
                      type: integer
                      example: 1
                    meal_plan_id:
                      type: integer
                      example: 1
                  required:
                  - access_level
                  - user_id
                  - meal_plan_id
              required:
              - meal_plan_participant
  "/meal_plan_participants/{id}":
    parameters:
    - name: id
      in: path
      description: Meal Plan Participant ID
      required: true
      schema:
        type: integer
    get:
      summary: Retrieves a meal plan participant
      tags:
      - Meal Plan Participants
      description: Returns a specific meal plan participant by ID
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '200':
          description: meal plan participant found
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  access_level:
                    type: string
                  user_id:
                    type: integer
                  meal_plan_id:
                    type: integer
                  created_at:
                    type: string
                    format: datetime
                  updated_at:
                    type: string
                    format: datetime
        '401':
          description: unauthorized
        '404':
          description: meal plan participant not found
    patch:
      summary: Updates a meal plan participant
      tags:
      - Meal Plan Participants
      description: Updates an existing meal plan participant
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '200':
          description: meal plan participant updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  access_level:
                    type: string
                  user_id:
                    type: integer
                  meal_plan_id:
                    type: integer
                  created_at:
                    type: string
                    format: datetime
                  updated_at:
                    type: string
                    format: datetime
        '401':
          description: unauthorized
        '404':
          description: meal plan participant not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                meal_plan_participant:
                  type: object
                  properties:
                    access_level:
                      type: string
                      enum:
                      - viewer
                      - admin
                    user_id:
                      type: integer
                    meal_plan_id:
                      type: integer
              required:
              - meal_plan_participant
    delete:
      summary: Deletes a meal plan participant
      tags:
      - Meal Plan Participants
      description: Deletes an existing meal plan participant
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '204':
          description: meal plan participant deleted
        '401':
          description: unauthorized
        '404':
          description: meal plan participant not found
  "/meal_plans":
    get:
      summary: Retrieves all meal plans
      tags:
      - Meal Plans
      description: Returns a list of all meal plans in the system
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '200':
          description: meal plans found
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    starting_day:
                      type: integer
                    share_id:
                      type: string
                    is_public:
                      type: boolean
                    owner_id:
                      type: integer
                    created_at:
                      type: string
                      format: datetime
                    updated_at:
                      type: string
                      format: datetime
                  required:
                  - id
                  - owner_id
        '401':
          description: unauthorized
    post:
      summary: Creates a meal plan
      tags:
      - Meal Plans
      description: Creates a new meal plan in the system
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '201':
          description: meal plan created
        '401':
          description: unauthorized
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                meal_plan:
                  type: object
                  properties:
                    starting_day:
                      type: integer
                      example: 1
                    share_id:
                      type: string
                      example: abc123
                    is_public:
                      type: boolean
                      example: true
                    owner_id:
                      type: integer
                      example: 1
                  required:
                  - owner_id
              required:
              - meal_plan
  "/meal_plans/{id}":
    parameters:
    - name: id
      in: path
      description: Meal Plan ID
      required: true
      schema:
        type: integer
    get:
      summary: Retrieves a meal plan
      tags:
      - Meal Plans
      description: Returns a specific meal plan by ID
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '200':
          description: meal plan found
        '401':
          description: unauthorized
        '404':
          description: meal plan not found
    patch:
      summary: Updates a meal plan
      tags:
      - Meal Plans
      description: Updates an existing meal plan
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '200':
          description: meal plan updated
        '401':
          description: unauthorized
        '404':
          description: meal plan not found
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                meal_plan:
                  type: object
                  properties:
                    starting_day:
                      type: integer
                    share_id:
                      type: string
                    is_public:
                      type: boolean
                    owner_id:
                      type: integer
              required:
              - meal_plan
    delete:
      summary: Deletes a meal plan
      tags:
      - Meal Plans
      description: Deletes an existing meal plan
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '204':
          description: meal plan deleted
        '401':
          description: unauthorized
        '404':
          description: meal plan not found
  "/meals":
    get:
      summary: Retrieves all meals
      tags:
      - Meals
      description: Returns a list of all meals in the system
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '200':
          description: meals found
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    title:
                      type: string
                    date:
                      type: string
                      format: date
                    not_eating_users:
                      type: array
                    meal_plan_id:
                      type: integer
                    chef_id:
                      type: integer
                    created_at:
                      type: string
                      format: datetime
                    updated_at:
                      type: string
                      format: datetime
                  required:
                  - id
                  - title
                  - meal_plan_id
                  - chef_id
        '401':
          description: unauthorized
    post:
      summary: Creates a meal
      tags:
      - Meals
      description: Creates a new meal in the system
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '201':
          description: meal created
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  title:
                    type: string
                  date:
                    type: string
                    format: date
                  not_eating_users:
                    type: array
                  meal_plan_id:
                    type: integer
                  chef_id:
                    type: integer
                  created_at:
                    type: string
                    format: datetime
                  updated_at:
                    type: string
                    format: datetime
        '401':
          description: unauthorized
        '422':
          description: invalid request
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: object
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                meal:
                  type: object
                  properties:
                    title:
                      type: string
                      example: Spaghetti Bolognese
                    date:
                      type: string
                      format: date
                      example: '2024-01-01'
                    not_eating_users:
                      type: array
                      example: []
                    meal_plan_id:
                      type: integer
                      example: 1
                    chef_id:
                      type: integer
                      example: 1
                  required:
                  - title
                  - meal_plan_id
                  - chef_id
              required:
              - meal
  "/meals/{id}":
    parameters:
    - name: id
      in: path
      description: Meal ID
      required: true
      schema:
        type: integer
    get:
      summary: Retrieves a meal
      tags:
      - Meals
      description: Returns a specific meal by ID
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '200':
          description: meal found
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  title:
                    type: string
                  date:
                    type: string
                    format: date
                  not_eating_users:
                    type: array
                  meal_plan_id:
                    type: integer
                  chef_id:
                    type: integer
                  created_at:
                    type: string
                    format: datetime
                  updated_at:
                    type: string
                    format: datetime
        '401':
          description: unauthorized
        '404':
          description: meal not found
    patch:
      summary: Updates a meal
      tags:
      - Meals
      description: Updates an existing meal
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '200':
          description: meal updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  title:
                    type: string
                  date:
                    type: string
                    format: date
                  not_eating_users:
                    type: array
                  meal_plan_id:
                    type: integer
                  chef_id:
                    type: integer
                  created_at:
                    type: string
                    format: datetime
                  updated_at:
                    type: string
                    format: datetime
        '401':
          description: unauthorized
        '404':
          description: meal not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                meal:
                  type: object
                  properties:
                    title:
                      type: string
                    date:
                      type: string
                      format: date
                    not_eating_users:
                      type: array
                    meal_plan_id:
                      type: integer
                    chef_id:
                      type: integer
              required:
              - meal
    delete:
      summary: Deletes a meal
      tags:
      - Meals
      description: Deletes an existing meal
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '204':
          description: meal deleted
        '401':
          description: unauthorized
        '404':
          description: meal not found
  "/users":
    get:
      summary: Retrieves all users
      tags:
      - Users
      description: Returns a list of all users in the system
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '200':
          description: users found
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    email:
                      type: string
                    name:
                      type: string
                    color:
                      type: string
                    token:
                      type: string
                    created_at:
                      type: string
                      format: datetime
                    updated_at:
                      type: string
                      format: datetime
                  required:
                  - id
                  - email
                  - name
        '401':
          description: unauthorized
    post:
      summary: Creates a user
      tags:
      - Users
      description: Creates a new user in the system
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '201':
          description: user created
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  email:
                    type: string
                  name:
                    type: string
                  color:
                    type: string
                  created_at:
                    type: string
                    format: datetime
                  updated_at:
                    type: string
                    format: datetime
        '401':
          description: unauthorized
        '422':
          description: invalid request
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: object
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  type: object
                  properties:
                    email:
                      type: string
                      example: john@example.com
                    name:
                      type: string
                      example: John Doe
                    color:
                      type: string
                      example: "#FF0000"
                    password:
                      type: string
                      example: password123
                  required:
                  - email
                  - name
                  - password
              required:
              - user
  "/users/{id}":
    parameters:
    - name: id
      in: path
      description: User ID
      required: true
      schema:
        type: integer
    get:
      summary: Retrieves a user
      tags:
      - Users
      description: Returns a specific user by ID
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '200':
          description: user found
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  email:
                    type: string
                  name:
                    type: string
                  color:
                    type: string
                  token:
                    type: string
                  created_at:
                    type: string
                    format: datetime
                  updated_at:
                    type: string
                    format: datetime
        '401':
          description: unauthorized
        '404':
          description: user not found
    patch:
      summary: Updates a user
      tags:
      - Users
      description: Updates an existing user
      security:
      - bearer: []
      parameters:
      - name: Authorization
        in: header
        required: true
        description: Bearer token
        schema:
          type: string
      responses:
        '200':
          description: user updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  email:
                    type: string
                  name:
                    type: string
                  color:
                    type: string
                  created_at:
                    type: string
                    format: datetime
                  updated_at:
                    type: string
                    format: datetime
        '401':
          description: unauthorized
        '404':
          description: user not found
        '422':
          description: invalid request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                user:
                  type: object
                  properties:
                    email:
                      type: string
                    name:
                      type: string
                    color:
                      type: string
                    password:
                      type: string
              required:
              - user
servers:
- url: http://localhost:3000
  description: Development server
- url: https://{defaultHost}
  description: Production server
  variables:
    defaultHost:
      default: api.mealplanning.com
